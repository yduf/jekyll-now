---
published: true
title: SSH
tags: ssh shell cli
---
## Copy ssh keys to another machine - [askubuntu](https://askubuntu.com/questions/4830/easiest-way-to-copy-ssh-keys-to-another-machine/4833#4833)

{% highlight cpp %}
#ssh-copy-id [-i identity_file] user@hostname.example.com
ssh-copy-id -i .ssh/backup_id_rsa.pub  yves@192.168.0.x
{% endhighlight %}

## List identity
{% highlight cpp %}
ssh-add -l
{% endhighlight %}

## [Disable password access](https://askubuntu.com/questions/1991/disable-password-access-through-ssh)
Edit **/etc/ssh/sshd_config**

{% highlight cpp %}
PasswordAuthentication no

sudo systemctl restart sshd
{% endhighlight %}

### [Test that it works](https://unix.stackexchange.com/questions/15138/how-to-force-ssh-client-to-use-only-password-auth/15141#15141)
{% highlight cpp %}
ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no example.com

=> yves@192.168.0.x: Permission denied (publickey).
{% endhighlight %}

## [Keep SSH session](https://medium.com/@grassfedcode/what-could-be-better-than-ssh-e69561ec1b83)
- [EternalTerminal (et)](https://eternalterminal.dev/)
	- install both on client and host (need a server)
- [mosh]({% post_url 2017-06-04-mosh %})

http://byobu.co/index.html

## [Enable SSH server](https://ubuntu.com/server/docs/service-openssh)

{% highlight bash %}
sudo apt install openssh-server
{% endhighlight %}

### [Generate SSH](https://www.golinuxcloud.com/generate-ssh-key/)
- [Github keys]({% post_url 2020-10-16-github %})

## References
- [How do you manage your SSH keys?](https://news.ycombinator.com/item?id=11276097)
- [SSH: Best practices](https://blog.0xbadc0de.be/archives/300)
- [SSH port fluxing](https://blog.benjojo.co.uk/post/ssh-port-fluxing-with-totp) / [Github](https://github.com/benjojo/totp-ssh-fluxer)
-
