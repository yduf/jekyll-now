---
published: true
title: A* search (Red Blob Games)
tags: algorithm search graph ruby
---
> A* is a modification of Dijkstra’s Algorithm that is optimized for **a single destination**. Dijkstra’s Algorithm can find paths to all locations; A* finds paths to one location, **or the closest of several locations**. It prioritizes paths that seem to be leading closer to a goal. - [Red Blob Games](https://www.redblobgames.com/pathfinding/a-star/introduction.html)

{% highlight ruby %}
## start can be an array or an item
#  there can be only one goal
def a_star_search(graph, start, goal)
    came_from   = {}
    cost_so_far = {}

    frontier = PriorityQueue.new
    case start
    when Array
    else
        start = [start]
    end

    start.each { |s| frontier.put(s, 0) 
                    came_from[to_key(s)]   = nil
                    cost_so_far[to_key(s)] = 0
                }

    while !frontier.empty?
        current = frontier.next
        
        break if current == goal
            
        graph.neighbors(current).each do |n|
            new_cost = cost_so_far[to_key(current)] + graph.cost(current, n)
            if !cost_so_far.key?(to_key(n)) || new_cost < cost_so_far[to_key(n)]
                cost_so_far[to_key(n)] = new_cost
                priority = new_cost + heuristic(goal, n)
                frontier.put(n, priority)
                came_from[to_key(n)] = current
            end
        end
    end

    return came_from, cost_so_far[to_key(goal)]
end
{% endhighlight %}
