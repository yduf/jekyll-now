---
title: Klipper (3dprinter firmware)
published: true
tags: 3dprint
excerpt_separator: ""
---
## Overview
[Fast 3D Printing with Raspberry Pi](https://hackaday.com/2017/12/26/fast-3d-printing-with-raspberry-pi-but-not-how-you-think/#more-285911)

[Klipper features](https://github.com/KevinOConnor/klipper/blob/master/docs/Features.md)

## Octoprint Installation

1. Install octoprint
2. Follow [instructions](https://github.com/KevinOConnor/klipper/blob/master/docs/Installation.md) 

- ssh to pi@octopi
- run commands
{% highlight bash %}
git clone https://github.com/KevinOConnor/klipper
./klipper/scripts/install-octopi.sh
{% endhighlight %}

The above will download Klipper, install some system dependencies, setup Klipper to run at system startup, and start the Klipper host software. It will require an internet connection and it may take a few minutes to complete.

## [Flashing firmware](https://github.com/KevinOConnor/klipper/blob/master/docs/Installation.md#building-and-flashing-the-micro-controller)
compile code 
{% highlight bash %}
cd ~/klipper/
make menuconfig
make
{% endhighlight %}

Finally, for common micro-controllers, the code can be flashed with:
Make sure octoprint is disconnected before.
{% highlight bash %}
sudo service klipper stop
make flash FLASH_DEVICE=/dev/ttyUSB0
sudo service klipper start
{% endhighlight %}

**Make sure to restart board afterward**: power off/on printer


## [Configure octopring to use Klipper](https://github.com/KevinOConnor/klipper/blob/master/docs/Installation.md#configuring-octoprint-to-use-klipper)

## [Configuring Klipper](https://github.com/KevinOConnor/klipper/blob/master/docs/Installation.md#configuring-klipper)

The Klipper configuration is stored in a text file on the Raspberry Pi. 

cp ~/klipper/config/example.cfg ~/printer.cfg

The default Klipper startup script also places a log in /tmp/klippy.log which provides more detailed information.

## Klipper plugin
There is a Klipper plugin that provide some ui in octoprint
and default config.

## [**Verify** config](https://github.com/KevinOConnor/klipper/blob/master/docs/Config_checks.md)

### What's works
- temperature reading seems ok (room temperature)
- M112 => cause disconnect
- extruder Temp control => heat / stabilized / off

### Open Issue (dagome config)

M112 - works, but hard to reconnect afterward

